(this.webpackJsonpmyfirstreact=this.webpackJsonpmyfirstreact||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n(3),s=n(5),r=n(4),a=n(0),i=n(1),d=n.n(i),l=n(7),u=n.n(l),f=(n(14),n(8)),m=n.n(f),j=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){var o;return Object(c.a)(this,n),(o=t.call(this,e)).changeName=function(){o.setState({companyName:"toto.com"})},o.state={companyName:o.props.companyName},o}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("header",{className:m.a.Header,children:["Welcome to ",this.state.companyName,Object(a.jsx)("button",{onClick:function(){return e.changeName()},children:"Change name"})]})}}]),n}(d.a.Component),b=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("footer",{style:{backgroundColor:"black",color:"white"},children:["@Copyright ",this.props.year]})}}]),n}(d.a.Component),y=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){var o;return Object(c.a)(this,n),(o=t.call(this,e)).getOneOffice=function(){document.getElementById("status").innerHTML="Waiting for server",fetch("http://localhost:8000/offices/"+document.getElementById("oldofficecode").value,{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=e.offices;console.log(t),o.setState({offices_index:document.getElementById("oldofficecode").value-1}),document.getElementById("status").innerHTML=e.msg,document.getElementById("officecode").value=o.state.offices_data[o.state.offices_index].officecode,document.getElementById("addressline1").value=o.state.offices_data[o.state.offices_index].addressline1,document.getElementById("addressline2").value=o.state.offices_data[o.state.offices_index].addressline2,document.getElementById("city").value=o.state.offices_data[o.state.offices_index].city,document.getElementById("state").value=o.state.offices_data[o.state.offices_index].state,document.getElementById("country").value=o.state.offices_data[o.state.offices_index].country,document.getElementById("postalcode").value=o.state.offices_data[o.state.offices_index].postalcode,document.getElementById("phone").value=o.state.offices_data[o.state.offices_index].phone,document.getElementById("territory").value=o.state.offices_data[o.state.offices_index].territory}),(function(e){document.getElementById("status").innerHTML="AJAX error: URL wrong or unreachable, see console"}))},o.clearForm=function(){document.getElementById("oldofficecode").value="",document.getElementById("officecode").value="",document.getElementById("addressline1").value="",document.getElementById("addressline2").value="",document.getElementById("city").value="",document.getElementById("state").value="",document.getElementById("country").value="",document.getElementById("postalcode").value="",document.getElementById("phone").value="",document.getElementById("territory").value=""},o.delete=function(){fetch("http://localhost:8000/offices/"+document.getElementById("officecode").value,{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){o.clearForm(),o.setState({error:{message:"Deleted"}})}),(function(e){o.setState({error:{message:"AJAX error: URL wrong or unreachable, see console"}})}))},o.saveOffice=function(){for(var e=!1,t=0;t<o.state.offices_count;t++)document.getElementById("officecode").value===o.state.offices_data[t].officecode&&(e=!0);console.log(e),e?o.updateOffice():o.addOffice()},o.state={offices_data:[],offices_index:0,offices_count:0,isLoaded:!1,error:null},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:8000/offices").then((function(t){t.ok?t.json().then((function(t){console.log(t),e.setState({offices_data:t.offices,offices_count:t.offices.length,offices_index:0,isLoaded:!0,error:null})})):t.json().then((function(t){e.setState({isLoaded:!1,error:t,offices_data:{},offices_count:0,offices_index:0})}))}),(function(t){e.setState({isLoaded:!1,error:{message:"AJAX error, URL wrong or unreachable, see console"},offices_data:{},offices_count:0,offices_index:0})}))}},{key:"updateOffice",value:function(){var e=this;document.getElementById("status").innerHTML="Waiting for server";var t={officecode:document.getElementById("officecode").value,addressline1:document.getElementById("addressline1").value,addressline2:document.getElementById("addressline2").value,city:document.getElementById("city").value,state:document.getElementById("state").value,country:document.getElementById("country").value,postalcode:document.getElementById("postalcode").value,phone:document.getElementById("phone").value,territory:document.getElementById("territory").value};fetch("http://localhost:8000/offices/"+document.getElementById("officecode").value,{method:"PUT",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){e.setState({error:{message:"Updated"}})}),(function(t){e.setState({error:{message:"AJAX error: URL wrong or unreachable, see console"}})}))}},{key:"addOffice",value:function(){document.getElementById("status").innerHTML="Waiting for server";var e={officecode:document.getElementById("officecode").value,addressline1:document.getElementById("addressline1").value,addressline2:document.getElementById("addressline2").value,city:document.getElementById("city").value,state:document.getElementById("state").value,country:document.getElementById("country").value,postalcode:document.getElementById("postalcode").value,phone:document.getElementById("phone").value,territory:document.getElementById("territory").value};fetch("http://localhost:8000/offices/",{method:"POST",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){document.getElementById("status").innerHTML=e.msg}),(function(e){document.getElementById("status").innerHTML="AJAX error: URL wrong or unreachable, see console"}))}},{key:"render",value:function(){var e=this;return this.state.error?Object(a.jsx)("div",{children:Object(a.jsx)("b",{children:this.state.error.message})}):this.state.isLoaded?0!==this.state.offices_count?Object(a.jsxs)("div",{children:[Object(a.jsx)("b",{children:"List of offices from server localhost:8000/offices"}),Object(a.jsx)("br",{}),"Server message: ",Object(a.jsx)("b",{children:Object(a.jsx)("span",{id:"status",children:"Waiting user action"})}),Object(a.jsx)("br",{}),"Select the office code to be updated : ",Object(a.jsx)("input",{onChange:function(){return e.getOneOffice()},type:"number",name:"officecode",id:"oldofficecode",min:1,step:1,max:this.state.offices_count,placeholder:"Select office"}),Object(a.jsxs)("form",{id:"officeform",children:[Object(a.jsx)("label",{children:"officecode"})," ",Object(a.jsx)("input",{type:"number",name:"officecode",id:"officecode"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Address Line 1"})," ",Object(a.jsx)("input",{type:"text",name:"addressline1",id:"addressline1"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Address Line 2"})," ",Object(a.jsx)("input",{type:"text",name:"addressline2",id:"addressline2"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"city"})," ",Object(a.jsx)("input",{type:"text",name:"city",id:"city"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"state"})," ",Object(a.jsx)("input",{type:"text",name:"state",id:"state"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"country"})," ",Object(a.jsx)("input",{type:"text",name:"country",id:"country"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"postal code"})," ",Object(a.jsx)("input",{type:"text",name:"postalcode",id:"postalcode"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"phone"})," ",Object(a.jsx)("input",{type:"text",name:"phone",id:"phone"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"territory"})," ",Object(a.jsx)("input",{type:"text",name:"territory",id:"territory"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{type:"button",onClick:function(){return e.delete()},children:"Delete"}),Object(a.jsx)("button",{type:"button",onClick:function(){return e.clearForm()},children:"Clear Form"}),Object(a.jsx)("button",{type:"button",onClick:function(){return e.saveOffice()},children:"Update/Add"})]})]}):Object(a.jsx)("div",{children:Object(a.jsx)("b",{children:"Office table is empty"})}):Object(a.jsx)("div",{children:Object(a.jsx)("b",{children:"Waiting for server ..."})})}}]),n}(d.a.Component),h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),s(e),r(e)}))},O=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(j,{companyName:"blabla.com"}),Object(a.jsx)(y,{}),Object(a.jsx)(b,{year:"2019 + 1"})]})}}]),n}(d.a.Component);u.a.render(Object(a.jsx)(O,{}),document.getElementById("root")),h()},8:function(e,t,n){e.exports={Header:"Header_Header__2-_Fy"}}},[[15,1,2]]]);
//# sourceMappingURL=main.3c50a490.chunk.js.map
(this["webpackJsonpfinal-project-client"]=this["webpackJsonpfinal-project-client"]||[]).push([[0],{14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var c=n(2),r=n(3),s=n(5),i=n(4),a=n(0),o=n(1),d=n.n(o),l=n(7),j=n.n(l),h=(n(14),n(8)),u=n.n(h),b=function(t){Object(s.a)(n,t);var e=Object(i.a)(n);function n(t){var r;return Object(c.a)(this,n),(r=e.call(this,t)).changeName=function(){r.setState({companyName:"toto.com"})},r.state={companyName:r.props.companyName},r}return Object(r.a)(n,[{key:"render",value:function(){return Object(a.jsx)("header",{className:u.a.Header,children:Object(a.jsx)("h1",{children:"Music Playlist"})})}}]),n}(d.a.Component),O=function(t){Object(s.a)(n,t);var e=Object(i.a)(n);function n(t){return Object(c.a)(this,n),e.call(this,t)}return Object(r.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("footer",{style:{backgroundColor:"black",color:"white"},children:["@Copyright ",this.props.year]})}}]),n}(d.a.Component),x=function(t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t.id}),Object(a.jsx)("td",{children:t.playlistid}),Object(a.jsx)("td",{children:t.title}),Object(a.jsx)("td",{children:t.uri}),Object(a.jsx)("td",{children:t.masterid}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{onClick:t.delete,children:"Delete"})})]})},f=function(t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t.id}),Object(a.jsx)("td",{children:t.title}),Object(a.jsx)("td",{children:Object(a.jsx)("img",{src:t.cover,alt:"cover"})}),Object(a.jsx)("td",{children:t.style}),Object(a.jsx)("td",{children:Object(a.jsx)("a",{href:"http://www.discogs.com/"+t.uri,children:"More Information"})}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{onClick:t.add,children:"Add"})})]})},m=function(t){Object(s.a)(n,t);var e=Object(i.a)(n);function n(t){var r;return Object(c.a)(this,n),(r=e.call(this,t)).getTracks=function(){fetch("https://api.discogs.com/database/search?key=hpWaohBENEGVybtdZsXR&secret=dzqvkpHSQRnkQVbFYtUsZsfgUashxNQe&artist="+document.getElementById("filter").value+"&country=canada",{method:"GET"}).then((function(t){return t.json()})).then((function(t){r.setState({discogs_data:t.results,discogs_count:t.results.length,isLoaded:!0}),document.getElementById("status").innerHTML="Results"}),(function(t){document.getElementById("status").innerHTML="AJAX error: URL wrong or unreachable, see console"}))},r.addTrack=function(t){var e=Object.assign([],r.state.discogs_data.filter((function(e){return e.id===t})));console.log(e[0].master_id);for(var n=0,c=0;c<e[0].style.length;c++)n="Acoustic"===e[0].style[c]?2:"Classic"===e[0].style[c]?3:"Country"===e[0].style[c]?4:"Metal"===e[0].style[c]?5:"Pop Rock"===e[0].style[c]?6:"Rock"===e[0].style[c]?7:1;var s={id:e[0].id,playlistid:n,title:e[0].title,uri:e[0].uri,masterid:e[0].master_id};fetch("http://localhost:8000/tracks",{method:"POST",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(s)}).then((function(t){return t.json()})).then((function(t){document.getElementById("status").innerHTML=t.msg}),(function(t){document.getElementById("status").innerHTML="AJAX error: URL wrong or unreachable, see console"}))},r.state={discogs_data:[],discogs_index:0,discogs_count:0,isLoaded:!1,error:null},r}return Object(r.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",name:"filter",id:"filter"}),Object(a.jsx)("button",{type:"button",onClick:function(){return t.getTracks()},children:"Search"}),Object(a.jsxs)("table",{children:[Object(a.jsxs)("thead",{children:[Object(a.jsx)("th",{children:"ID"}),Object(a.jsx)("th",{children:"Title"}),Object(a.jsx)("th",{children:"Cover"}),Object(a.jsx)("th",{children:"Genre"}),Object(a.jsx)("th",{children:"Details"}),Object(a.jsx)("th",{children:"Add"})]}),Object(a.jsx)("tbody",{children:this.state.discogs_data.map((function(e){return Object(a.jsx)(f,{id:e.id,title:e.title,cover:e.thumb,style:e.style,add:t.addTrack.bind(t,e.id),info:e.uri},e.id)}))})]})]})}}]),n}(d.a.Component),y=function(t){Object(s.a)(n,t);var e=Object(i.a)(n);function n(t){var r;return Object(c.a)(this,n),(r=e.call(this,t)).deleteTrack=function(t){fetch("http://localhost:8000/tracks/"+t,{method:"DELETE"}).then((function(t){return t.json()})).then((function(t){r.setState({error:{message:"Deleted"}}),document.getElementById("status").innerHTML="Track Deleted"}),(function(t){r.setState({error:{message:"AJAX error: URL wrong or unreachable, see console"}}),document.getElementById("status").innerHTML="AJAX error: URL wrong or unreachable, see console"}))},r.state={tracks_data:[],tracks_index:0,tracks_count:0,isLoaded:!1,error:null},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("http://localhost:8000/tracks").then((function(e){e.ok?e.json().then((function(e){console.log(e),t.setState({tracks_data:e.tracks,tracks_count:e.tracks.length,tracks_index:0,isLoaded:!0,error:null})})):e.json().then((function(e){t.setState({isLoaded:!1,error:e,tracks_data:{},tracks_count:0,tracks_index:0})}))}),(function(e){t.setState({isLoaded:!1,error:{message:"AJAX error, URL wrong or unreachable, see console"},tracks_data:{},tracks_count:0,tracks_index:0})}))}},{key:"render",value:function(){var t=this;return this.state.error?Object(a.jsx)("div",{children:Object(a.jsx)("b",{children:this.state.error.message})}):this.state.isLoaded?0!==this.state.tracks_count?Object(a.jsxs)("div",{class:"music-class",children:[Object(a.jsx)("div",{class:"right-area",children:Object(a.jsx)(m,{})}),Object(a.jsx)("b",{children:Object(a.jsx)("span",{id:"status",children:"Current Playlist"})}),Object(a.jsx)("br",{}),Object(a.jsxs)("table",{children:[Object(a.jsxs)("thead",{children:[Object(a.jsx)("th",{children:"ID"}),Object(a.jsx)("th",{children:"Playlist ID"}),Object(a.jsx)("th",{children:"Title"}),Object(a.jsx)("th",{children:"URI"}),Object(a.jsx)("th",{children:"Master ID"}),Object(a.jsx)("th",{children:"Remove"})]}),Object(a.jsx)("tbody",{children:this.state.tracks_data.map((function(e){return Object(a.jsx)(x,{id:e.id,playlistid:e.playlist_id,title:e.title,uri:e.uri,delete:t.deleteTrack.bind(t,e.id),masterid:e.master_id},e.id)}))})]})]}):Object(a.jsx)("div",{children:Object(a.jsx)("b",{children:"track table is empty"})}):Object(a.jsx)("div",{children:Object(a.jsx)("b",{children:"Waiting for server ..."})})}}]),n}(d.a.Component),g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,s=e.getLCP,i=e.getTTFB;n(t),c(t),r(t),s(t),i(t)}))},p=function(t){Object(s.a)(n,t);var e=Object(i.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(b,{companyName:"blabla.com"}),Object(a.jsx)(y,{}),Object(a.jsx)(O,{year:"2019 + 1"})]})}}]),n}(d.a.Component);j.a.render(Object(a.jsx)(p,{}),document.getElementById("root")),g()},8:function(t,e,n){t.exports={Header:"Header_Header__3L3ek"}}},[[15,1,2]]]);
//# sourceMappingURL=main.c55657fb.chunk.js.map